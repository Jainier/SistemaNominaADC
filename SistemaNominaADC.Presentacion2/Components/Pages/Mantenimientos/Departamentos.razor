@page "/mantenimientos/departamentos"
@using SistemaNominaADC.Entidades

<h3>Catálogo de Departamentos</h3>

@if (mostrarFormulario)
{
    @* MODO EDICIÓN: Usamos el componente genérico de Formulario *@
    <FormularioMantenimiento Titulo="@tituloFormulario"
                             Modelo="departamentoActual"
                             OnValidSubmit="Guardar"
                             OnCancelar="Cancelar">

        <EditorTemplate Context="depto">
            @* Aquí van los INPUTS específicos de Departamento *@
            <div class="mb-3">
                <label class="form-label">Nombre del Departamento</label>
                <InputText class="form-control" @bind-Value="depto.Nombre" />
                <ValidationMessage For="@(() => depto.Nombre)" />
            </div>

            @* Ejemplo de otro campo si lo tuvieras *@
            @* <div class="mb-3">
                 <label>Presupuesto</label>
                 <InputNumber class="form-control" @bind-Value="depto.Presupuesto" />
               </div> *@
        </EditorTemplate>

    </FormularioMantenimiento>
}
else
{
    @* MODO LISTA *@
    <div class="mb-3">
        <button class="btn btn-primary" @onclick="Crear">
            <i class="bi bi-plus-circle"></i> Nuevo Departamento
        </button>
    </div>

    @if (listaDepartamentos == null)
    {
        <p>Cargando...</p>
    }
    else
    {
        <TablaMantenimiento TItem="Departamento" Items="listaDepartamentos" OnRowClick="Editar">
            <HeaderTemplate>
                <th>ID</th>
                <th>Nombre</th>
                <th>Estado</th>
            </HeaderTemplate>
            <RowTemplate Context="item">
                <td>@item.IdDepartamento</td>
                <td>@item.Nombre</td>
                <td>@(item.Estado?.Nombre ?? "N/A")</td>
            </RowTemplate>
        </TablaMantenimiento>
    }
}