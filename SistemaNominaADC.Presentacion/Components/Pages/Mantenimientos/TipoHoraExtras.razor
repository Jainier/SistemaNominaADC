@page "/mantenimientos/tipohoraextras"
@using SistemaNominaADC.Entidades
@attribute [Authorize]

<h3>Catalogo de Tipos de Hora Extra</h3>

@if (mostrarFormulario)
{
    <FormularioMantenimiento Titulo="@tituloFormulario"
                             Modelo="tipoActual"
                             OnValidSubmit="Guardar"
                             OnCancelar="Cancelar"
                             OnEliminar="Desactivar"
                             MostrarEliminar="@(tipoActual.IdTipoHoraExtra > 0)">
        <EditorTemplate Context="item">
            <div class="mb-3">
                <label class="form-label">Nombre</label>
                <InputText class="form-control" @bind-Value="item.Nombre" />
            </div>
            <div class="mb-3">
                <label class="form-label">Porcentaje de Pago</label>
                <InputNumber class="form-control" @bind-Value="item.PorcentajePago" step="0.0001" />
                <small class="text-muted">Ejemplo: 1.3500 = 135% del pago base.</small>
            </div>
            <SelectorEstado TEntidad="TipoHoraExtra" @bind-IdEstadoSeleccionado="item.IdEstado" />
        </EditorTemplate>
    </FormularioMantenimiento>
}
else
{
    <button class="btn btn-primary mb-3" @onclick="Crear">Nuevo Tipo de Hora Extra</button>

    <TablaMantenimiento TItem="TipoHoraExtra" Items="listaTipos" OnRowClick="Editar">
        <ColumnsTemplate>
            <RadzenDataGridColumn TItem="TipoHoraExtra" Property="IdTipoHoraExtra" Title="ID" />
            <RadzenDataGridColumn TItem="TipoHoraExtra" Property="Nombre" Title="Nombre" />
            <RadzenDataGridColumn TItem="TipoHoraExtra" Title="Porcentaje Pago">
                <Template Context="row">
                    @(row.PorcentajePago?.ToString("0.0000") ?? "N/A")
                </Template>
            </RadzenDataGridColumn>
            <RadzenDataGridColumn TItem="TipoHoraExtra" Title="Estado">
                <Template Context="row">
                    @(row.Estado?.Nombre ?? row.Estado?.Descripcion ?? "N/A")
                </Template>
            </RadzenDataGridColumn>
        </ColumnsTemplate>
    </TablaMantenimiento>
}


